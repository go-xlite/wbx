<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instances - Cloud Console</title>
    <style>*{box-sizing:border-box;margin:0;padding:0}body{color:#000;background:#f5f5f5;flex-direction:column;min-height:100vh;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Amazon Ember,Roboto,Helvetica Neue,Arial,sans-serif;display:flex}.top-bar{color:#fff;background:#232f3e;justify-content:space-between;align-items:center;height:48px;padding:0 24px;display:flex;box-shadow:0 1px #0000001a}.breadcrumb{align-items:center;gap:8px;font-size:14px;display:flex}.breadcrumb a{color:#aab7b8;text-decoration:none;transition:color .2s}.breadcrumb a:hover{color:#fff}.breadcrumb .separator{color:#566573}.breadcrumb .current{color:#fff;font-weight:500}.user-menu{align-items:center;gap:16px;display:flex}.user-region{color:#aab7b8;font-size:13px}.content{flex:1;width:100%;max-width:1400px;margin:0 auto;padding:24px}.page-header{justify-content:space-between;align-items:center;margin-bottom:20px;display:flex}.page-header h1{color:#16191f;font-size:28px;font-weight:400}.header-actions{gap:12px;display:flex}button{cursor:pointer;color:#16191f;background:#fff;border:1px solid #aab7b8;border-radius:2px;padding:8px 16px;font-size:14px;font-weight:500;transition:all .15s}button:hover:not(:disabled){background:#fafafa;border-color:#879596}button:disabled{opacity:.5;cursor:not-allowed}.btn-primary{color:#fff;background:#ec7211;border-color:#ec7211}.btn-primary:hover:not(:disabled){background:#eb5f07;border-color:#eb5f07}.btn-secondary{background:#fff}.toolbar{background:#fff;border:1px solid #d5dbdb;border-radius:2px;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:16px;margin-bottom:16px;padding:12px 16px;display:flex}.toolbar-left{flex-wrap:wrap;flex:1;align-items:center;gap:12px;display:flex}.toolbar-right{align-items:center;gap:16px;display:flex}.filter-select{color:#16191f;cursor:pointer;background:#fff;border:1px solid #aab7b8;border-radius:2px;min-width:150px;padding:8px 12px;font-size:14px;transition:all .15s}.filter-select:hover{border-color:#687078}.filter-select:focus{border-color:#ec7211;outline:none;box-shadow:0 0 0 2px #ec72111a}.search-box{flex:1;max-width:400px;position:relative}.search-icon{color:#687078;font-size:14px;position:absolute;top:50%;left:12px;transform:translateY(-50%)}.search-box input{border:1px solid #aab7b8;border-radius:2px;width:100%;padding:8px 12px 8px 36px;font-size:14px;transition:border-color .15s}.search-box input:focus{border-color:#0972d3;outline:none;box-shadow:0 0 0 1px #0972d3}.instance-count{color:#687078;white-space:nowrap;font-size:14px}.loader{text-align:center;background:#fff;border:1px solid #d5dbdb;border-radius:2px;padding:60px 20px}.spinner{border:3px solid #f3f3f3;border-top-color:#ec7211;border-radius:50%;width:40px;height:40px;margin:0 auto 16px;animation:.8s linear infinite spin}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader p{color:#687078;font-size:14px}.table-container{background:#fff;border:1px solid #d5dbdb;border-radius:2px;overflow:hidden}.instances-table{border-collapse:collapse;width:100%}.instances-table thead{background:#fafafa;border-bottom:1px solid #d5dbdb}.instances-table th{text-align:left;color:#16191f;border-bottom:1px solid #d5dbdb;padding:12px 16px;font-size:13px;font-weight:600}.instances-table tbody tr{border-bottom:1px solid #eaeded;transition:background-color .15s}.instances-table tbody tr:hover{background:#fafafa}.instances-table tbody tr:last-child{border-bottom:none}.instances-table td{color:#16191f;vertical-align:middle;padding:16px;font-size:14px}.instance-id{color:#0972d3;font-family:Monaco,Menlo,monospace;font-size:13px}.instance-name{font-family:Monaco,Menlo,monospace;font-weight:500}.instance-type,.instance-ip,.instance-region,.instance-zone,.instance-date{color:#687078;font-size:13px}.status-badge{white-space:nowrap;border-radius:12px;padding:4px 12px;font-size:12px;font-weight:500;display:inline-block}.status-running{color:#155724;background:#d4edda}.status-stopped{color:#721c24;background:#f8d7da}.status-pending,.status-stopping{color:#856404;background:#fff3cd}.status-terminated{color:#383f45;background:#d6d8db}.empty-state{text-align:center;color:#687078;padding:80px 20px;font-size:14px}.error-state{text-align:center;color:#d13212;background:#fff8f6;border:1px solid #f1d4d4;border-radius:2px;margin-bottom:16px;padding:60px 20px}.pagination{justify-content:center;gap:4px;margin-top:16px;display:flex}.pagination button{background:#fff;border:1px solid #aab7b8;min-width:36px;height:36px;padding:6px 12px;font-size:13px}.pagination button.active{color:#fff;background:#ec7211;border-color:#ec7211}.pagination button.active:hover{background:#eb5f07;border-color:#eb5f07}.pagination span{color:#687078;align-items:center;padding:0 8px;display:flex}.footer{background:#fff;border-top:1px solid #d5dbdb;margin-top:auto;padding:16px 24px}.footer-content{justify-content:space-between;align-items:center;max-width:1400px;margin:0 auto;display:flex}.footer-item{color:#687078;font-size:13px}.modal{z-index:1000;background:#00000080;justify-content:center;align-items:center;padding:20px;display:none;position:fixed;inset:0}.modal-dialog{background:#fff;border-radius:8px;flex-direction:column;width:100%;max-width:1200px;max-height:90vh;display:flex;box-shadow:0 4px 20px #0000004d}.modal-header{border-bottom:1px solid #d5dbdb;justify-content:space-between;align-items:center;padding:20px 24px;display:flex}.modal-header h2{color:#16191f;font-size:20px;font-weight:600}.modal-close{color:#687078;cursor:pointer;background:0 0;border:none;border-radius:4px;justify-content:center;align-items:center;width:32px;height:32px;padding:0;font-size:32px;transition:all .2s;display:flex}.modal-close:hover{color:#16191f;background:#f5f5f5}.modal-body{flex:1;padding:24px;overflow-y:auto}.modal-loader{text-align:center;color:#687078;padding:60px 20px;font-size:16px}.details-header{border-bottom:2px solid #ec7211;margin-bottom:24px;padding-bottom:16px}.details-header h2{color:#16191f;margin-bottom:8px;font-size:24px;font-weight:600}.details-id{color:#687078;font-family:Courier New,monospace;font-size:14px}.details-section{margin-bottom:32px}.details-section h3{color:#16191f;border-bottom:1px solid #d5dbdb;margin-bottom:16px;padding-bottom:8px;font-size:18px;font-weight:600}.details-grid{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;display:grid}.detail-item{color:#16191f;font-size:14px}.detail-item strong{color:#687078;min-width:120px;font-weight:500;display:inline-block}.storage-table table,.network-table table{border-collapse:collapse;background:#fff;border:1px solid #d5dbdb;border-radius:4px;width:100%;font-size:13px}.storage-table th,.network-table th{text-align:left;color:#16191f;background:#f5f5f5;border-bottom:2px solid #d5dbdb;padding:12px;font-weight:600}.storage-table td,.network-table td{color:#16191f;border-bottom:1px solid #eaeded;padding:12px}.storage-table tr:last-child td,.network-table tr:last-child td{border-bottom:none}.disk-type{color:#037f0c;background:#e7f6ec;border-radius:4px;padding:2px 8px;font-size:12px;font-weight:500;display:inline-block}.disk-model{margin-bottom:2px;font-weight:500}.disk-serial{color:#687078;font-family:Courier New,monospace;font-size:11px}.usage-bar{vertical-align:middle;background:#eaeded;border-radius:6px;width:80px;height:12px;margin-right:8px;display:inline-block;overflow:hidden}.usage-fill{background:linear-gradient(90deg,#037f0c,#16a34a);height:100%;transition:width .3s}.usage-text{color:#687078;font-size:12px}.health-ok{color:#037f0c;font-weight:500}.health-warning{color:#ec7211;font-weight:500}.nic-vendor{font-weight:500}.nic-model{color:#687078;font-size:12px}.ipv6{color:#687078;font-family:Courier New,monospace;font-size:11px}.mac-address{font-family:Courier New,monospace;font-size:12px}.clickable-row{cursor:pointer;transition:background-color .15s}.clickable-row:hover{background-color:#f0f8ff!important}@media (width<=768px){.page-header{flex-direction:column;align-items:flex-start;gap:12px}.toolbar{flex-direction:column;align-items:stretch}.toolbar-left,.toolbar-right{width:100%}.search-box{max-width:none}.instances-table{font-size:13px}.instances-table th,.instances-table td{padding:12px 8px}}</style>
    <script>
        (function () {
            const segments = window.location.pathname.split('/').filter(s => s);
            window.PATH_PREFIX = segments.length > 0 ? '/' + segments[0] : '';
        })();
        
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('a[href*="__PREFIX__"]').forEach(el => {
                const rawHref = el.getAttribute('href');
                const newHref = rawHref.replace(/__PREFIX__/g, window.PATH_PREFIX);
                el.setAttribute('href', newHref);
            });
        }, { once: true });
    </script>
</head>
<body>
    <div class="top-bar">
        <div class="breadcrumb">
            <a href="/">üè† Home</a>
            <span class="separator">/</span>
            <span class="current">Instances</span>
        </div>
        <div class="user-menu">
            <span class="user-region">üåç All Regions</span>
        </div>
    </div>

    <div class="content">
        <div class="page-header">
            <h1>Instances</h1>
            <div class="header-actions">
                <button id="refreshBtn" class="btn-secondary">üîÑ Refresh</button>
            </div>
        </div>

        <div class="toolbar">
            <div class="toolbar-left">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchInput" placeholder="Search instances...">
                </div>
                <select id="regionFilter" class="filter-select">
                    <option value="">All Regions</option>
                </select>
                <select id="zoneFilter" class="filter-select">
                    <option value="">All Zones</option>
                </select>
                <select id="stateFilter" class="filter-select">
                    <option value="">All States</option>
                </select>
                <select id="typeFilter" class="filter-select">
                    <option value="">All Instance Types</option>
                </select>
            </div>
            <div class="toolbar-right">
                <div class="instance-count">
                    <span id="displayedServers">0</span> of <span id="totalServers">0</span> instances
                </div>
            </div>
        </div>

        <div id="loader" class="loader" style="display: none;">
            <div class="spinner"></div>
            <p>Loading instances...</p>
        </div>

        <div class="table-container">
            <table class="instances-table">
                <thead>
                    <tr>
                        <th>Instance ID</th>
                        <th>Instance Name</th>
                        <th>Status</th>
                        <th>Instance Type</th>
                        <th>Public IP</th>
                        <th>Region</th>
                        <th>Launched</th>
                    </tr>
                </thead>
                <tbody id="instancesTableBody">
                    <tr class="empty-row">
                        <td colspan="7" class="empty-state">Loading instances...</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="pagination" class="pagination"></div>
    </div>

    <div class="footer">
        <div class="footer-content">
            <span class="footer-item">Last updated: <span id="lastUpdate">-</span></span>
        </div>
    </div>

    <!-- Details Modal -->
    <div id="detailsModal" class="modal" onclick="if(event.target === this) closeModal()">
        <div class="modal-dialog">
            <div class="modal-header">
                <h2>Instance Details</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalContent">
                Loading...
            </div>
        </div>
    </div>

    <script type="module">
        import(`${window.PATH_PREFIX}/sway/p/sway-core.js`).then(() => {
            import(`${window.PATH_PREFIX}/trail/p/api-core.js`).then(()=> {
                import(`${window.PATH_PREFIX}/api-demo/p/app.js`);
            });
        });
    </script>
</body>
</html>

var L=window.location.pathname.split("/").filter((A)=>A),Q=L.length>0?"/"+L[0]:"";var q=null,H=!1;function J(A){if(isNaN(A))return"00:00";let B=Math.floor(A/60),C=Math.floor(A%60);return`${B.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`}function z(A,B="info"){let C=document.getElementById("messages"),F=document.createElement("div");F.className="message "+B;let G=new Date().toLocaleTimeString();F.innerHTML=`<strong>[${G}]</strong> ${A}`,C.appendChild(F),C.scrollTop=C.scrollHeight}function I(){if(!q)return;if(document.getElementById("duration").textContent=J(q.duration),document.getElementById("currentTime").textContent=J(q.currentTime),q.buffered.length>0){let B=(q.buffered.end(q.buffered.length-1)/q.duration*100).toFixed(0);document.getElementById("buffered").textContent=B+"%"}}function X(){if(q)q.play().then(()=>{z("Video playback started","success")}).catch((A)=>{z("Error playing video: "+A.message,"error")})}function Y(){if(q)q.pause(),z("Video paused","info")}function Z(){if(q)q.currentTime=Math.max(0,q.currentTime-10),z("Rewound 10 seconds","info")}function $(){if(q)q.currentTime=Math.min(q.duration,q.currentTime+10),z("Fast-forwarded 10 seconds","info")}function j(){if(q)H=!H,q.muted=H,z(H?"Video muted":"Video unmuted","info")}function N(){q=document.getElementById("videoPlayer");let A=document.getElementById("videoSource"),B=window.location.pathname.split("/").filter((K)=>K),C=B.length>0?"/"+B[0]:"",G=`${window.location.protocol}//${window.location.host}${C}/stream/sharko_video.mp4`;A.src=G,q.load(),document.getElementById("streamEndpoint").textContent=G,document.getElementById("playBtn").addEventListener("click",X),document.getElementById("pauseBtn").addEventListener("click",Y),document.getElementById("rewindBtn").addEventListener("click",Z),document.getElementById("forwardBtn").addEventListener("click",$),document.getElementById("muteBtn").addEventListener("click",j),q.addEventListener("loadedmetadata",function(){z("Video metadata loaded - Duration: "+J(q.duration),"success"),I()}),q.addEventListener("loadstart",function(){z("Loading video...","info")}),q.addEventListener("canplay",function(){z("Video ready to play","success")}),q.addEventListener("play",function(){z("Playback started","success")}),q.addEventListener("pause",function(){z("Playback paused","info")}),q.addEventListener("ended",function(){z("Playback ended","info")}),q.addEventListener("timeupdate",function(){I()}),q.addEventListener("progress",function(){I()}),q.addEventListener("error",function(K){let E="Unknown error";if(q.error)switch(q.error.code){case 1:E="Video loading aborted";break;case 2:E="Network error";break;case 3:E="Video decoding failed";break;case 4:E="Video format not supported";break}z("Video error: "+E,"error")}),q.addEventListener("seeking",function(){z("Seeking to "+J(q.currentTime),"info")}),q.addEventListener("seeked",function(){z("Seek complete","success")}),z("Media Streaming Test Console loaded","info"),I()}if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",N);else N();

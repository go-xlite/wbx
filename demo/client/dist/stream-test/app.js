var H=window.location.pathname.split("/").filter((q)=>q),J=H.length>0?"/"+H[0]:"";var h=null,C=!1;function F(q){if(isNaN(q))return"00:00";let w=Math.floor(q/60),x=Math.floor(q%60);return`${w.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}`}function k(q,w="info"){let x=document.getElementById("messages"),A=document.createElement("div");A.className="message "+w;let B=new Date().toLocaleTimeString();A.innerHTML=`<strong>[${B}]</strong> ${q}`,x.appendChild(A),x.scrollTop=x.scrollHeight}function E(){if(!h)return;if(document.getElementById("duration").textContent=F(h.duration),document.getElementById("currentTime").textContent=F(h.currentTime),h.buffered.length>0){let w=(h.buffered.end(h.buffered.length-1)/h.duration*100).toFixed(0);document.getElementById("buffered").textContent=w+"%"}}function K(){if(h)h.play().then(()=>{k("Video playback started","success")}).catch((q)=>{k("Error playing video: "+q.message,"error")})}function L(){if(h)h.pause(),k("Video paused","info")}function N(){if(h)h.currentTime=Math.max(0,h.currentTime-10),k("Rewound 10 seconds","info")}function Q(){if(h)h.currentTime=Math.min(h.duration,h.currentTime+10),k("Fast-forwarded 10 seconds","info")}function R(){if(h)C=!C,h.muted=C,k(C?"Video muted":"Video unmuted","info")}function I(){h=document.getElementById("videoPlayer");let q=document.getElementById("videoSource"),w=window.location.pathname.split("/").filter((G)=>G),x=w.length>0?"/"+w[0]:"",B=`${window.location.protocol}//${window.location.host}${x}/stream/sharko_video.mp4`;q.src=B,h.load(),document.getElementById("streamEndpoint").textContent=B,document.getElementById("playBtn").addEventListener("click",K),document.getElementById("pauseBtn").addEventListener("click",L),document.getElementById("rewindBtn").addEventListener("click",N),document.getElementById("forwardBtn").addEventListener("click",Q),document.getElementById("muteBtn").addEventListener("click",R),h.addEventListener("loadedmetadata",function(){k("Video metadata loaded - Duration: "+F(h.duration),"success"),E()}),h.addEventListener("loadstart",function(){k("Loading video...","info")}),h.addEventListener("canplay",function(){k("Video ready to play","success")}),h.addEventListener("play",function(){k("Playback started","success")}),h.addEventListener("pause",function(){k("Playback paused","info")}),h.addEventListener("ended",function(){k("Playback ended","info")}),h.addEventListener("timeupdate",function(){E()}),h.addEventListener("progress",function(){E()}),h.addEventListener("error",function(G){let z="Unknown error";if(h.error)switch(h.error.code){case 1:z="Video loading aborted";break;case 2:z="Network error";break;case 3:z="Video decoding failed";break;case 4:z="Video format not supported";break}k("Video error: "+z,"error")}),h.addEventListener("seeking",function(){k("Seeking to "+F(h.currentTime),"info")}),h.addEventListener("seeked",function(){k("Seek complete","success")}),k("Media Streaming Test Console loaded","info"),E()}if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",I);else I();

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proxy Test Console</title>
    <style>*{box-sizing:border-box;margin:0;padding:0}body{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif}.container{background:#fff;border-radius:12px;max-width:1200px;margin:0 auto;padding:30px;box-shadow:0 20px 60px #0000004d}h1{color:#667eea;text-align:center;margin-bottom:30px;font-size:2em}h3{color:#333;border-bottom:2px solid #667eea;margin-bottom:15px;padding-bottom:8px;font-size:1.2em}.info-box{background:#f8f9fa;border:1px solid #dee2e6;border-radius:8px;margin-bottom:20px;padding:20px}.config-info{flex-direction:column;gap:10px;display:flex}.config-item{align-items:center;gap:10px;display:flex}.config-item strong{color:#495057;min-width:120px}.config-item span{background:#fff;border:1px solid #ced4da;border-radius:4px;padding:4px 8px;font-family:Courier New,monospace}.request-section{background:#f8f9fa;border:1px solid #dee2e6;border-radius:8px;margin-bottom:20px;padding:20px}.form-group{margin-bottom:15px}.form-group label{color:#495057;margin-bottom:5px;font-weight:500;display:block}.form-group input,.form-group select{border:1px solid #ced4da;border-radius:4px;width:100%;padding:10px;font-family:Courier New,monospace;font-size:14px}.button-group{gap:10px;display:flex}button{cursor:pointer;border:none;border-radius:6px;padding:12px 24px;font-size:14px;font-weight:600;transition:all .3s}#send-request-btn{color:#fff;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);flex:1}#send-request-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}#clear-btn{color:#fff;background:#6c757d}#clear-btn:hover{background:#5a6268}.stats-box{color:#fff;background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);border-radius:8px;margin-bottom:20px;padding:20px}.stats-box h3{color:#fff;border-bottom-color:#ffffff4d}.stats-grid{grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-top:10px;display:grid}.stat-item{text-align:center;background:#fff3;border-radius:8px;padding:15px}.stat-label{opacity:.9;margin-bottom:5px;font-size:.9em}.stat-value{font-size:1.8em;font-weight:700}.response-section{background:#f8f9fa;border:1px solid #dee2e6;border-radius:8px;margin-bottom:20px;padding:20px}.response-headers{background:#fff;border:1px solid #dee2e6;border-radius:4px;max-height:150px;margin-bottom:10px;padding:10px;font-family:Courier New,monospace;font-size:12px;overflow-y:auto}.response-body{white-space:pre-wrap;word-wrap:break-word;background:#fff;border:1px solid #dee2e6;border-radius:4px;max-height:300px;padding:10px;font-family:Courier New,monospace;font-size:12px;overflow-y:auto}.log-section{background:#212529;border-radius:8px;margin-bottom:20px;padding:20px}.log-section h3{color:#fff;border-bottom-color:#495057}.message-log{color:#0f0;background:#000;border:1px solid #495057;border-radius:4px;height:200px;padding:10px;font-family:Courier New,monospace;font-size:12px;overflow-y:auto}.log-entry{border-bottom:1px solid #333;margin-bottom:5px;padding:5px}.log-entry:last-child{border-bottom:none}.log-time{color:#888;margin-right:10px}.log-success{color:#28a745}.log-error{color:#dc3545}.log-info{color:#17a2b8}.navigation{border-top:2px solid #dee2e6;flex-wrap:wrap;justify-content:center;gap:15px;padding-top:20px;display:flex}.navigation a{color:#667eea;border:2px solid #667eea;border-radius:6px;padding:8px 16px;text-decoration:none;transition:all .3s}.navigation a:hover{color:#fff;background:#667eea;transform:translateY(-2px)}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}::-webkit-scrollbar-thumb{background:#667eea;border-radius:4px}::-webkit-scrollbar-thumb:hover{background:#764ba2}</style>
    <script>(()=>{document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('a[href*="__PREFIX__"]').forEach((c)=>{let j=c.getAttribute("href").replace(/__PREFIX__/g,window.PATH_PREFIX);c.setAttribute("href",j)})},{once:!0});let d=window.location.pathname.split("/").filter((c)=>c);window.PATH_PREFIX=d.length>0?"/"+d[0]:""})();</script>
</head>
<body>
    <div class="container">
        <h1>üîÄ Reverse Proxy Test Console</h1>
        
        <div class="info-box">
            <h3>Proxy Configuration</h3>
            <div class="config-info">
                <div class="config-item">
                    <strong>Target:</strong>
                    <span>https://file-drop.gtn.one:8080/xt21/</span>
                </div>
                <div class="config-item">
                    <strong>Local Endpoint:</strong>
                    <span id="proxy-endpoint">/proxy/</span>
                </div>
            </div>
        </div>

        <div class="request-section">
            <h3>Make Request</h3>
            <div class="form-group">
                <label for="path-input">Path (relative to target):</label>
                <input type="text" id="path-input" value="" placeholder="e.g., index.html or leave empty for root">
            </div>
            <div class="form-group">
                <label for="method-select">Method:</label>
                <select id="method-select">
                    <option value="GET">GET</option>
                    <option value="POST">POST</option>
                    <option value="PUT">PUT</option>
                    <option value="DELETE">DELETE</option>
                    <option value="HEAD">HEAD</option>
                </select>
            </div>
            <div class="button-group">
                <button id="send-request-btn">Send Request</button>
                <button id="clear-btn">Clear Logs</button>
            </div>
        </div>

        <div class="stats-box">
            <h3>Statistics</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-label">Total Requests</div>
                    <div class="stat-value" id="total-requests">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Successful</div>
                    <div class="stat-value" id="successful-requests">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Failed</div>
                    <div class="stat-value" id="failed-requests">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Last Status</div>
                    <div class="stat-value" id="last-status">-</div>
                </div>
            </div>
        </div>

        <div class="response-section">
            <h3>Response</h3>
            <div id="response-headers" class="response-headers"></div>
            <div id="response-body" class="response-body"></div>
        </div>

        <div class="log-section">
            <h3>Request Log</h3>
            <div id="message-log" class="message-log"></div>
        </div>

        <div class="navigation">
            <a href="__PREFIX__/home/">‚Üê Home</a>
            <a href="__PREFIX__/ws-test/">WebSocket Test</a>
            <a href="__PREFIX__/sse-test/">SSE Test</a>
            <a href="__PREFIX__/stream-test/">Stream Test</a>
            <a href="__PREFIX__/proxy-test/">Proxy Test</a>
        </div>
    </div>

    <script>
        // Load app.js with dynamic prefix
        const script = document.createElement('script');
        script.src = window.PATH_PREFIX + '/proxy-test/p/app.js';
        document.body.appendChild(script);
    </script>
</body>
</html>
